#+TITLE: Pulse Sensor for ESPHome
#+AUTHOR: Paul Schulz
#+OPTIONS: toc:nil num:nil

* Overview

This is an [[https://esphome.io][ESPHome]] project called *pulse-for-esphome*, based on the Home Assistant Glow
which was originally created in 2011. (For more background on this project see: [[https://glow-energy.io]] )

The first version of this hardware and software has been released.

[[file:images/installed.jpg]]

* Repository
- GitHub: https://github.com/PaulSchulz/pulse-for-esphome

* Hardware Development
** Kicad
Kicad has been used to create a printed circuit board (PCB) which is used to
mount the microcontroller and connector for the 'flash' sensor (photodiode).

See: [[kicad]]

[[file:images/esphome-pulse-pcb-front.jpg]]
[[file:images/esphome-pulse-pcb-back.jpg]]


* Software Development

See: [[esphome]]

** Common YAML files
The firmware makes use of a master file, with a collection of shared YAML files
in 'common/'.

** Where is the 'secrets.yaml' file?
*NOTE:* Wifi configuration is now using the Improv tool to set the Wifi network
details. This allows the Wifi credentials to be set, using either a USB Serial
connection, or Bluetooth (BLE), from a webpage in a browser. See: [[https://improv-wifi.com]]

A dummy 'secrets.yaml' file has been included in the repository. Edit it to match
your Wifi and Home Assistant API credentials.

Please do not include this file in any pull requests.

To ensure this, include the following alias in your .git/config file

#+begin_example
[alias]
    ignore = update-index --assume-unchanged
    unignore = update-index --no-assume-unchanged
    ignored = !git ls-files -v | grep "^[[:lower:]]"
#+end_example

and then set changes to this file to be ignored by git in future commits on the
CLI with:

#+begin_src sh
$ git ignore esphome/secrets.yaml
$ git ignored
h esphome/secrets.yaml
#+end_src

Multiple alternative local secrets files in 'esphome/' can stored by using
filenames of the form 'secrets-ID.yaml'. These are set to be ignored in
'.gitignore', and can be copied to override 'secrets.yaml' as required.

* License
This project is licensed under the MIT License. See the [[file:LICENSE][LICENSE]] file for details.

* Resources
 TBD

* Acknowledgments and Thankyous
The project would not have been possible without the help and assistance of the
following people and groups:

- Robert Hart and the Port Adelaide Enfield Council Library - IoT Experimenters Group
- Ewan Parsons, from V3G
- Klaas Schout, and the original Home Assistant Glow project ([[https://glow-energy.io]])

  
